<!doctype html><html><head><meta name='viewport' content='width=device-width,initial-scale=1'><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='../../../../style.css'></head><body><h2>Coverage Report</h2><h4>Created: 2023-01-25 11:29</h4><div class='centered'><table><div class='source-name-title'><pre>libs/utils/tests/bin_ser_test.rs</pre></div><tr><td><pre>Line</pre></td><td><pre>Count</pre></td><td><pre>Source (<a href='#L7'>jump to first uncovered line</a>)</pre></td></td></tr><tr><td class='line-number'><a name='L1' href='#L1'><pre>1</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>use bytes::{Buf, BytesMut};<span class='cyan'></span>use bytes::{Buf, BytesMut};</pre></td></tr><tr><td class='line-number'><a name='L2' href='#L2'><pre>2</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>use hex_literal::hex;</pre></td></tr><tr><td class='line-number'><a name='L3' href='#L3'><pre>3</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>use serde::Deserialize;</pre></td></tr><tr><td class='line-number'><a name='L4' href='#L4'><pre>4</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>use std::io::Read;</pre></td></tr><tr><td class='line-number'><a name='L5' href='#L5'><pre>5</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>use utils::bin_ser::LeSer;</pre></td></tr><tr><td class='line-number'><a name='L6' href='#L6'><pre>6</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L7' href='#L7'><pre>7</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>#[derive(<span class='red'>Debug</span>, PartialEq, Eq, D<span class='red'>ese</span><span class='red'>rializ</span>e)]</pre><div class='expansion-view'><div class='source-name-title'><pre>Unexecuted instantiation: _RNvXNvXNvCscOM1Qp9z9Cm_12bin_ser_test1__NtB7_10HeaderDataNtNtCsjcvcqNC4L2M_5serde2de11Deserialize11deserializeNtB2_14___FieldVisitorNtBV_7Visitor9expecting</pre></div></div><div class='expansion-view'><div class='source-name-title'><pre>Unexecuted instantiation: _RNvXs0_NvXNvCscOM1Qp9z9Cm_12bin_ser_test1__NtBa_10HeaderDataNtNtCsjcvcqNC4L2M_5serde2de11Deserialize11deserializeNtB5_9___VisitorNtBY_7Visitor9expecting</pre></div></div><div class='expansion-view'><div class='source-name-title'><pre>Unexecuted instantiation: _RINvXNvXNvCscOM1Qp9z9Cm_12bin_ser_test1__NtB8_10HeaderDataNtNtCsjcvcqNC4L2M_5serde2de11Deserialize11deserializeNtB3_14___FieldVisitorNtBW_7Visitor9visit_strpEB8_</pre></div></div><div class='expansion-view'><div class='source-name-title'><pre>Unexecuted instantiation: _RINvXNvXNvCscOM1Qp9z9Cm_12bin_ser_test1__NtB8_10HeaderDataNtNtCsjcvcqNC4L2M_5serde2de11Deserialize11deserializeNtB3_14___FieldVisitorNtBW_7Visitor11visit_bytespEB8_</pre></div></div><div class='expansion-view'><div class='source-name-title'><pre>Unexecuted instantiation: _RINvXNvXNvCscOM1Qp9z9Cm_12bin_ser_test1__NtB8_10HeaderDataNtNtCsjcvcqNC4L2M_5serde2de11Deserialize11deserializeNtB3_14___FieldVisitorNtBW_7Visitor9visit_u64pEB8_</pre></div></div><div class='expansion-view'><div class='source-name-title'><pre>Unexecuted instantiation: _RINvXs0_NvXNvCscOM1Qp9z9Cm_12bin_ser_test1__NtBb_10HeaderDataNtNtCsjcvcqNC4L2M_5serde2de11Deserialize11deserializeNtB6_9___VisitorNtBZ_7Visitor9visit_mappEBb_</pre></div></div><div class='expansion-view'><div class='source-name-title'><pre>Unexecuted instantiation: _RINvXs_NvXNvCscOM1Qp9z9Cm_12bin_ser_test1__NtBa_10HeaderDataNtNtCsjcvcqNC4L2M_5serde2de11Deserialize11deserializeNtB5_7___FieldBW_11deserializepEBa_</pre></div></div><div class='expansion-view'><div class='centered'><table><div class='source-name-title'><pre>_RINvXNvCscOM1Qp9z9Cm_12bin_ser_test1__NtB5_10HeaderDataNtNtCsjcvcqNC4L2M_5serde2de11Deserialize11deserializeQINtNtCsH8KbXZEWBw_7bincode2de12DeserializerINtNtB1M_4read8IoReaderQRShEINtNtB1O_6config20WithOtherIntEncodingINtB2V_15WithOtherEndianNtB2V_14DefaultOptionsNtNtB2V_6endian12LittleEndianENtNtB2V_3int14FixintEncodingEEEB5_</pre></div><tr><td><pre>Line</pre></td><td><pre>Count</pre></td><td><pre>Source</pre></td></tr><tr><td class='line-number'><a name='L7' href='#L7'><pre>7</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>#[derive(Debug, PartialEq, Eq, Deserialize)]</pre></td></tr></table></div></div><div class='expansion-view'><div class='centered'><table><div class='source-name-title'><pre>_RINvXs0_NvXNvCscOM1Qp9z9Cm_12bin_ser_test1__NtBb_10HeaderDataNtNtCsjcvcqNC4L2M_5serde2de11Deserialize11deserializeNtB6_9___VisitorNtBZ_7Visitor9visit_seqINtNvXs1_NtCsH8KbXZEWBw_7bincode2deQINtB2A_12DeserializerppENtBZ_12Deserializer17deserialize_tuple6AccessINtNtB2A_4read8IoReaderQRShEINtNtB2C_6config20WithOtherIntEncodingINtB4D_15WithOtherEndianNtB4D_14DefaultOptionsNtNtB4D_6endian12LittleEndianENtNtB4D_3int14FixintEncodingEEEBb_</pre></div><tr><td><pre>Line</pre></td><td><pre>Count</pre></td><td><pre>Source</pre></td></tr><tr><td class='line-number'><a name='L7' href='#L7'><pre>7</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>#[derive(Debug, PartialEq, Eq, Deserialize)]</pre></td></tr></table></div></div></td></tr><tr><td class='line-number'><a name='L8' href='#L8'><pre>8</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>pub struct HeaderData {</pre></td></tr><tr><td class='line-number'><a name='L9' href='#L9'><pre>9</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    magic: u16,</pre></td></tr><tr><td class='line-number'><a name='L10' href='#L10'><pre>10</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    info: u16,</pre></td></tr><tr><td class='line-number'><a name='L11' href='#L11'><pre>11</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    tli: u32,</pre></td></tr><tr><td class='line-number'><a name='L12' href='#L12'><pre>12</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    pageaddr: u64,</pre></td></tr><tr><td class='line-number'><a name='L13' href='#L13'><pre>13</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    len: u32,</pre></td></tr><tr><td class='line-number'><a name='L14' href='#L14'><pre>14</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>}</pre></td></tr><tr><td class='line-number'><a name='L15' href='#L15'><pre>15</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L16' href='#L16'><pre>16</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>// A manual implementation using BytesMut, just so we can</pre></td></tr><tr><td class='line-number'><a name='L17' href='#L17'><pre>17</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>// verify that we decode the same way.</pre></td></tr><tr><td class='line-number'><a name='L18' href='#L18'><pre>18</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>pub fn decode_header_data(buf: &amp;mut BytesMut) -&gt; HeaderData {</pre></td></tr><tr><td class='line-number'><a name='L19' href='#L19'><pre>19</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    HeaderData {</pre></td></tr><tr><td class='line-number'><a name='L20' href='#L20'><pre>20</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>        magic: buf.get_u16_le(),</pre></td></tr><tr><td class='line-number'><a name='L21' href='#L21'><pre>21</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>        info: buf.get_u16_le(),</pre></td></tr><tr><td class='line-number'><a name='L22' href='#L22'><pre>22</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>        tli: buf.get_u32_le(),</pre></td></tr><tr><td class='line-number'><a name='L23' href='#L23'><pre>23</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>        pageaddr: buf.get_u64_le(),</pre></td></tr><tr><td class='line-number'><a name='L24' href='#L24'><pre>24</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>        len: buf.get_u32_le(),</pre></td></tr><tr><td class='line-number'><a name='L25' href='#L25'><pre>25</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    }</pre></td></tr><tr><td class='line-number'><a name='L26' href='#L26'><pre>26</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>}</pre></td></tr><tr><td class='line-number'><a name='L27' href='#L27'><pre>27</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L28' href='#L28'><pre>28</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>pub fn decode2&lt;R: Read&gt;(reader: &amp;mut R) -&gt; HeaderData {</pre></td></tr><tr><td class='line-number'><a name='L29' href='#L29'><pre>29</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    HeaderData::des_from(reader).unwrap()</pre></td></tr><tr><td class='line-number'><a name='L30' href='#L30'><pre>30</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>}</pre></td></tr><tr><td class='line-number'><a name='L31' href='#L31'><pre>31</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L32' href='#L32'><pre>32</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>#[test]</pre></td></tr><tr><td class='line-number'><a name='L33' href='#L33'><pre>33</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>fn test1() {</pre></td></tr><tr><td class='line-number'><a name='L34' href='#L34'><pre>34</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    let raw1 = hex!(&quot;8940 7890 5534 7890  1289 5379 8378 7893  4207 8923 4712 3218&quot;);</pre></td></tr><tr><td class='line-number'><a name='L35' href='#L35'><pre>35</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    let mut buf1 = BytesMut::from(&amp;raw1[..]);</pre></td></tr><tr><td class='line-number'><a name='L36' href='#L36'><pre>36</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    let mut buf2 = &amp;raw1[..];</pre></td></tr><tr><td class='line-number'><a name='L37' href='#L37'><pre>37</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    let dec1 = decode_header_data(&amp;mut buf1);</pre></td></tr><tr><td class='line-number'><a name='L38' href='#L38'><pre>38</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    let dec2 = decode2(&amp;mut buf2);</pre></td></tr><tr><td class='line-number'><a name='L39' href='#L39'><pre>39</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    assert_eq!(dec1, dec2);</pre></td></tr><tr><td class='line-number'><a name='L40' href='#L40'><pre>40</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>    assert_eq!(buf1, buf2);</pre></td></tr><tr><td class='line-number'><a name='L41' href='#L41'><pre>41</pre></a></td><td class='covered-line'><pre>1</pre></td><td class='code'><pre>}</pre></td></tr></table></div></body></html>